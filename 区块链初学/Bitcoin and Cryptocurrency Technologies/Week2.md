## 比特币如何实现去中心化的 
1. 中心化与去中心化  
    * 比特币的去中心化  
    比特币的去中心化是技术和聪明的激励工程的结合，并不单单是技术实现的  
    * 中心化与去中心化
    事实上并没有一个真正的完全去中心化的系统，或者说目前还没有。所有的系统只能是绝大部分的去中心化以及少部分的中心化，例如E-mail  
    * 比特币的去中心化细节  
    五个问题  
    **谁维护这个交易总账？**  --交易总账公开，所有人共同维护，共同认可的最长账本为交易总账  
    **谁有权威决定哪些交易是合法的？**  --获得记账权的节点，或者说完成工作量证明的节点，可以对交易进行认可，即 将交易纳入自己要提交的下一个交易区块中。  
    **谁创建比特币？** --获得记账权的节点，可以在区块的首部增加一条系统给自己的交易，即挖矿的奖励，这是目前比特币的唯一生成方式。  
    **谁决定改变系统的规则？**  --目前还是比特币社区的开发人员  
    **比特币如何获得交换价值？**  --  
    ***************  
    底层的协议是去中心化的，但基于它之上的服务却可能是中心化或者是位于去中心化和中心化之间的。  
    * 三个方面  
    **比特币的点对点网络**：   它是最大程度上接近纯去中心化的，因为任意节点可以在任意时刻选择接入或离开网络，并且准入门槛非常低，只要你下载一个客户端在电脑上运行即可。  
    **比特币的挖矿**：   挖矿技术是对所有人开放的，从技术层面来看的去中心化的。但是其所需要的资金成本很高，随着系统的演化，个人进行挖矿已经不存在了，全部是以组织的形式进行的，出现了很高的集中化趋势。  
    **比特币的软件更新**：   从概念上来说，你可以自己开发一个软件运行比特币系统，但在现实中却是行不通的，因为你的比特币系统并不为所有人所信任。因此被社区共同信任的核心开发者拥有很大的中心化权利。  

2. 分布式一致性  
数据分布式的存储在不同的设备上，如何保证这些数据保持一致？或者说在数据出现不一致的时候。应该相信哪个节点存储的数据？  
    * 分布式一致性的技术定义  
    有一组固定数目的节点 每个节点都有一些输入值，一致性协议应该确定一个唯一的输出值  
    两个要求：  
    所有正确的节点最终应该就某个值达成一致，这里指出正确的节点，这是因为有一些节点可能会有错误 或者就是彻底恶意的  
    这些节点们达成共识的值 不能是任意值 应该就是 至少其中一个正确节点的输入值  
    * 比特币的一致性共识  
    在任何给定时刻，所有点对点网络中的节点能够就交易区块的队列 达成共识。  
    存在的问题：在整个比特币网络中，每一笔想要进行的交易需要对全网进行广播，但由于网络原因，或者目前在网的节点不同等等原因，会导致有的节点收到了该交易，有的节点没有收到，那么如何在全网进行已经完成的交易的共识？  
    传统的分布一致性算法，并不能很好的解决这个问题，因为在比特币网络中由于没有中心化服务器，因此没有一个“全局时间”，因此无法进行，例如，在某个时间进行某一步操作，这样的事情。  
    对此，比特币系统给出的解决办法是，激励。 这并不是一般意义上分布式一致性问题的解决办法，而仅仅是货币系统情况下的解决办法。并且最终也并非完全的达成一致，而仅仅是随着时间增长，一致性的概率成指数上升，交易出错的概率指数型下降。  
    
3. 没有身份标识的共识：区块链  
比特币所有的节点 是在节点没有任何可持久化的长期身份标识情况下完成所有运作的。这是一个和传统分布式一致性算法运作方式不同的地方。  
    * 一个假设  
    比特币系统拥有在系统所有节点中随机抽取一个节点的能力，这个随机是指真正的随机。  
    达成隐式一致性：随机抽取一个节点，让该节点拥有记账权，即该节点决定哪些交易被纳入共同账本中。然后其他节点进行接受或者不接受，其方式是，是否在该区块后进行延长区块链。  
    * 作恶节点获得记账权  
    如果随机挑选到的是作恶节点，即试图破坏这个一致性的节点，那么该作恶节点能做到什么？能得到什么？  
    **偷走其他人的比特币？**  --不能。因为比特币的交易需要获得该币拥有者的私钥，拥有记账权并不能修改他人的交易。  
    **拒绝为某人服务？**  --可以。在记账的时候故意排除掉某个节点发送的交易。但由于该作恶节点并不能保证每次都是它获取记账权，因此被排除的节点的交易只需要等到下次其他获取记账权的诚实节点记账时，即可被纳入账本。  
    **实现重复支付，即双花？** --可以。作恶节点只需要在获取记账权的时候，向一个节点比如Bob发送交易请求，花费比特币并获取服务。那么在Bob看到该交易出现在共同账本上时，认为该币已经转移给了自己。然后给予作恶节点服务。作恶节点收到服务之后，立即再将已经支付给Bob的这枚比特币，支付给自己，或者其他账户，并将该交易纳入记账区块，为了保证，交易给Bob的那枚比特币不生效，而支付给自己的那枚比特币生效，作恶节点需要保证其他节点在后者的区块后进行延长区块，使得包含后者交易的区块成为最长共同账本的一部分。在其他节点看来，作恶节点的这两笔交易并没有什么区别，因此是随机选择一个区块进行延长，而不是像我们分析的时候，知道前者是正规交易，后者是二次花费，所以会有一定概率出现“双花”。但是，该问题很好解决，只要Bob的确认再晚一些，在包含自己的那笔交易的区块后，再有延长一个区块，那么作恶区块为了赶超该链，所付出的花费将要更扩大，延长的区块越多，花费越大，即作恶节点决定作恶的成本越高，不作恶的几率越高，即该交易正常进行的概率越高，该概率是随着延长区块的数目指数增加的，一般来说延长6个区块之后，基本可以确认该交易“确实”发生了。  
4. 比特币中的工程激励--工作量证明  
在上一节的假设中，我们假设系统可以随机抽取一个节点获得记账权。现在我们仍然保持该假设。那么我们如何保证抽取到的节点，尽力成为一个诚实节点而不是作恶节点？在工程上，由于无法获得节点的身份认证信息，因此无法对其进行真实有效的惩罚，因此我们需要进行激励，对诚实节点进行激励。  
    * 两种激励方式  
    区块奖励。每一个获得记账权的节点，在记账的区块中可以实现一个创币交易，该交易可以凭空创造一定数量的比特币给该记账节点，作为记账奖励。目前该奖励是25BTC，该奖励是随时间递减的，因为整个比特币系统的比特币数量上限是2100万，因此可以预见随着已经被创造出来的比特币增多，那么接下来用于奖励的比特币越少，最终会减少至0。  
    交易费。 纳入区块的交易中，输出值是可以小于输入值的，这少的一部分交易便被奖励给区块的创造者，即记账节点，现在社区是鼓励这种做法的。接下来如何发展，目前还没有一个好的定论。  
    * 还需解决的问题  
    如何实现随机挑选一个节点  
    各节点争抢区块奖励，造成的问题如何解决？  
    如果某个对手创造多个节点，试图破坏这个公示过程，即女巫攻击。该如何解决？  
    * 工作量证明 PoW  
    不是随机选择一个节点，而是我们做一些不同的事情 那就是我们通过以某种无人可以独占的资源为依据 近似选取一个随机节点  
    该独占资源为计算机资源的时候，即为工作量证明  
    该独占资源为所拥有的货币的时候，即为权益证明 PoS  
    * 哈希谜题工作量证明  
    三个特征  
    算力的集中  --虽然技术上每个人都可以称为矿工，但在实际的挖矿生态系统中已经有很多算力的集中，或者参与者的集中。因为并不是每个节点都可以负担解决哈希谜题的经济花费。    
    计算成本需要能参数化  --算力投入与获得的收益之间的关系并不是一成不变的，你获得的收益是你的算力投入占所有节点算力投入的占比，进行计算的。通过定时重算目标值实现。  
    实际验证哈希难题的结果是很容易的 --即我们验证找到的结果是很简单的，即仅进行一次哈希运算即可。  
5. 目前的总结  
    * 自举  
    三件事巧妙的相互作用  
    我们要保证区块链的安全性，以使得比特币成为一个切实可靠的货币。实现这个的前提是  
    对手无法攻破共识过程，即无法接管超过50%的节点。即拥有一个由大量诚实的节点组成的健康的挖矿系统，即所有的矿工节点都激烈的竞争区块的记账权，而由于他们得到的奖励是比特币，所以他们激烈竞争的前提是  
    比特币的汇率很高，而比特币汇率很高的前提是大家信任比特币系统的生态，信任比特币系统的安全性，愿意用现实货币兑换比特币。  
    * 比特币的潜在威胁 --51%攻击  
    该攻击能实现和不能实现的威胁，类似于作恶节点获取记账权，不在赘述。  
    但这种攻击的花费与他获得的收益并不成正比，所以一般不会出现这种“吃力不讨好”的人。  
    
